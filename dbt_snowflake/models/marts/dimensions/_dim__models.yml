version: 2

models:
  - name: dim_books
    description: "Dimension table containing metadata for books, including details from Google Books and Goodreads."
    tags:
      - dimensions
      - books
    columns:
      - name: ISBN
        description: "Unique identifier for each book."
        tests:
          - unique
          - not_null
      - name: book_title
        description: "Title of the book."
        tests:
          - not_null
      - name: genre
        description: "genre of the book."
        tests:
          - not_null
      - name: rating
        description: "rating in a scale from 0 to 5 of the book."
        tests:
          - not_null
      - name: pages
        description: "pages in the book."
        tests:
          - not_null

  - name: dim_authors

    description: "Dimension table containing metadata about authors and their aggregated sales data."
    tags:
      - dimensions
      - authors
    columns:
      - name: author_id
        description: "Unique identifier for each author."
        tests:
          - unique
          - not_null
      - name: author_name
        description: "Name of the author."
        tests:
          - not_null
      - name: publisher_group
        description: "Publisher group associated with the author."
      - name: total_books_sold
        description: "Total number of books sold by the author."
        tests:
          - not_null
          - dbt_utils.accepted_range:
              min_value: 0
      - name: total_revenue
        description: "Total revenue generated by the author's books."
        tests:
          - not_null
          - dbt_utils.accepted_range:
              min_value: 0

  - name: dim_genres
    description: "Dimension table containing metadata and sales data for book genres."
    tags:
      - dimensions
      - genres
    columns:
      - name: genre
        description: "Name of the genre."
        tests:
          - not_null
      - name: books_in_genre
        description: "Total number of distinct books in this genre."
        tests:
          - not_null
      - name: total_books_sold
        description: "Total number of books sold in this genre."
        tests:
          - not_null
          - dbt_utils.accepted_range:
              min_value: 0
      - name: total_revenue
        description: "Total revenue generated by books in this genre."
        tests:
          - not_null
          - dbt_utils.accepted_range:
              min_value: 0
