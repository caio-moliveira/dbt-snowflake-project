version: 2

models:
  - name: rating_trends_by_year
    description: "Tracks average book ratings over the years to identify user preference trends."
    tags:
      - marketing
      - trends
    columns:
      - name: rating_year
        description: "Year in which the ratings were recorded."
        tests:
          - not_null
      - name: avg_rating
        description: "Average rating for books in the given year."
        tests:
          - not_null
      - name: total_books_rated
        description: "Total number of books rated in the given year."
        tests:
          - not_null

  - name: top_rated_books
    description: "Identifies the highest-rated books, prioritizing those with more reviews to ensure reliability of ratings."
    tags:
      - marketing
      - top_performers
    columns:
      - name: ISBN
        description: "Unique identifier for each book."
        tests:
          - unique
          - not_null
          - relationships:
              to: ref('dim_books')
              field: ISBN
      - name: title
        description: "Title of the book."
        tests:
          - not_null
      - name: author
        description: "Name of the book's author."
        tests:
          - not_null
      - name: rating
        description: "Average Goodreads rating for the book."
        tests:
          - not_null
      - name: reviews_count
        description: "Number of reviews for the book on Goodreads."
        tests:
          - not_null

  - name: top_rated_genres
    description: "Ranks the highest-rated genres based on the aggregated ratings of books within each genre."
    tags:
      - marketing
      - genres
    columns:
      - name: genre_name
        description: "Name of the genre."
        tests:
          - not_null
      - name: avg_rating
        description: "Average rating for books in this genre."
        tests:
          - not_null
      - name: total_books
        description: "Total number of books in this genre."
        tests:
          - not_null
