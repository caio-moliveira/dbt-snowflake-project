version: 2

sources:
  - name: raw_stage
    schema: MODELS_RAW
    tables:
      - name: books
        description: "Books data from external sources"
        columns:
          - name: ISBN
            description: "Unique identifier for the book"
            tests:
              - not_null
              - unique
      - name: goodreads
        description: "Goodreads data"
        columns:
          - name: ISBN
            description: "Unique identifier for the book"
            tests:
              - not_null
              - unique
          - name: GR_Rating
            description: "Rating from Goodreads"
            tests:
              - accepted_values:
                  values: [0, 1, 2, 3, 4, 5]
      - name: google_books
        description: "Google Books data"
        columns:
          - name: ISBN
            description: "Unique identifier for the book"
            tests:
              - not_null
              - unique
      - name: sales
        description: "Sales data"
        columns:
          - name: ISBN
            description: "Unique identifier for the book"
            tests:
              - not_null
              - unique
          - name: Sales_Year
            description: "Year of sales data"
            tests:
              - not_null

models:
  - name: stg_books
    description: "Cleaned and deduplicated books data"
    columns:
      - name: ISBN
        description: "Unique identifier for the book"
        tests:
          - not_null
          - unique
      - name: Publication_Date
        description: "Parsed publication date in YYYY-MM-DD format"
        tests:
          - not_null
  - name: stg_goodreads
    description: "Cleaned Goodreads data"
    columns:
      - name: ISBN
        description: "Unique identifier for the book"
        tests:
          - not_null
          - unique
  - name: stg_google_books
    description: "Cleaned Google Books data"
    columns:
      - name: ISBN
        description: "Unique identifier for the book"
        tests:
          - not_null
          - unique
  - name: stg_sales
    description: "Cleaned sales data"
    columns:
      - name: ISBN
        description: "Unique identifier for the book"
        tests:
          - not_null
          - unique
      - name: Sales_Year
        description: "Year of sales data"

