version: 2

sources:
  - name: raw_stage
    schema: MODELS_RAW
    description: "Raw data from external sources"
    tables:
      - name: books
        description: "Books data from external sources"
        columns:
          - name: ISBN
            description: "Unique identifier for the book"
            tests:
              - not_null
          - name: Title
            description: "Title of the book"
          - name: Author
            description: "Author of the book"
          - name: Publ_Date
            description: "Publication date of the book"
          - name: Product_Class
            description: "Product classification of the book"
      - name: goodreads
        description: "Goodreads data from external sources"
        columns:
          - name: ISBN
            description: "Unique identifier for the book"
            tests:
              - not_null
          - name: GR_Title
            description: "Title of the book in Goodreads"
          - name: GR_Author
            description: "Author of the book in Goodreads"
          - name: GR_Rating
            description: "Rating of the book in Goodreads"
            tests:
              - dbt_utils.accepted_range:
                  min_value: 0
                  max_value: 5
          - name: GR_Pages
            description: "Number of pages in the book (Goodreads)"
      - name: google_books
        description: "Google Books data from external sources"
        columns:
          - name: ISBN
            description: "Unique identifier for the book"
            tests:
              - not_null
          - name: GB_Title
            description: "Title of the book in Google Books"
          - name: GB_Author
            description: "Author of the book in Google Books"
          - name: GB_Desc
            description: "Description of the book in Google Books"
          - name: GB_Pages
            description: "Number of pages in the book (Google Books)"
          - name: GB_Genre
            description: "Genre of the book (Google Books)"
      - name: sales
        description: "Sales data from external sources"
        columns:
          - name: ISBN
            description: "Unique identifier for the book"
            tests:
              - not_null
          - name: Sales_Year
            description: "Year of the sale"
          - name: Position
            description: "Rank position of the book in sales"
          - name: Volume
            description: "Volume of sales for the book"
          - name: Value
            description: "Value of sales for the book"
          - name: RRP
            description: "Recommended Retail Price of the book"
          - name: ASP
            description: "Average Selling Price of the book"

models:
  - name: stg_books
    description: "Cleaned and deduplicated books data"
    columns:
      - name: books_id
        description: "Unique identifier for the book"
        tests:
          - not_null
          - unique
      - name: ISBN
        description: "Unique identifier for the book"
        tests:
          - not_null
      - name: title
        description: "Title of the book (cleaned)"
      - name: imprint
        description: "imprint of the book (cleaned)"
      - name: author
        description: "Author of the book (cleaned)"
      - name: publisher_group
        description: "Parsed publication date in YYYY-MM-DD format"
        tests:
          - not_null
      - name: product_class
        description: "Classification of the book"
      - name: dbt_load_date
        description: "dbt_load_date of the book"        
      - name: row_number
        description: "row_number of the book (cleaned)"
  - name: stg_goodreads
    description: "Cleaned Goodreads data"
    columns:
      - name: goodreads_id
        description: "Unique identifier for the book"
        tests:
          - not_null
          - unique
      - name: ISBN
        description: "Unique identifier for the book"
        tests:
          - not_null
      - name: title
        description: "Title of the book (from Goodreads)"
      - name: author
        description: "Author of the book (from Goodreads)"
      - name: rating
        description: "Rating of the book (from Goodreads)"
      - name: pages
        description: "Number of pages in the book (from Goodreads)"
      - name: dbt_load_date
        description: "dbt_load_date of the book (from Goodreads)"
      - name: row_number
        description: "row_number  (from Goodreads)" 
  - name: stg_google_books
    description: "Cleaned Google Books data"
    columns:
      - name: google_id
        description: "Unique identifier for the book"
        tests:
          - not_null
          - unique
      - name: ISBN
        description: "Unique identifier for the book"
        tests:
          - not_null
      - name: title
        description: "Title of the book (from Google Books)"
      - name: author
        description: "Author of the book (from Google Books)"
      - name: bookdescription
        description: "Description of the book (from Google Books)"
      - name: pages
        description: "Number of pages in the book (from Google Books)"
      - name: genre
        description: "Genre of the book (from Google Books)"
      - name: dbt_load_date
        description: "dbt_load_date (from Google Books)"
      - name: row_number
        description: "row_number (from Google Books)"
  - name: stg_sales
    description: "Cleaned sales data"
    columns:  
      - name: sales_id
        description: "Unique identifier for the sales"
        tests:
          - not_null
          - unique
      - name: ISBN
        description: "Unique identifier for the book"
        tests:
          - not_null
      - name: sales_year
        description: "Year of the sale"
      - name: rank_position
        description: "Sales rank of the book"
      - name: sales_volume
        description: "Volume of sales for the book"
      - name: sales_value
        description: "Value of sales for the book"
      - name: recommended_retail_price
        description: "RRP of the book"
      - name: average_sales_price
        description: "ASP of the book"
      - name: dbt_load_date
        description: "dbt_load_date of the book"

